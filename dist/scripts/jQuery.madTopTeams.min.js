/**********************************************************************\
*
*	jQuery.madTopTeams
*	----------------------
*	version: 2.0.5
*	date: 2021/06/10
*	license: GPL-3.0-or-later
*	copyright (C) 2021 Brian Patrick Mucha
*
\**********************************************************************/

!function(e){"use strict";function a(a,t){var n=[],i=[];e.each(t.fr_ids,function(a,o){var s="method=getTopTeamsData&v=1.0&api_key="+t.apiKey+"&response_format=json&suppress_response_codes=true&fr_id="+o,r=t.proxyURL+escape(t.secureConvioPath+"CRTeamraiserAPI?"+s),l=e.getJSON(r,function(e){i.push(e)});n.push(l)}),e.when.apply(e,n).then(function(){var n=[];e.each(i,function(e,a){if(a.getTopTeamsDataResponse&&a.getTopTeamsDataResponse.teamraiserData){var t;for(t=0;t<a.getTopTeamsDataResponse.teamraiserData.length;t++)a.getTopTeamsDataResponse.teamraiserData[t].total_num=Number(a.getTopTeamsDataResponse.teamraiserData[t].total.replace(/[^0-9.-]+/g,""));n=[].concat(n,a.getTopTeamsDataResponse.teamraiserData)}}),function(a,t,n){if(a.errorResponse)t.html('<div class="search_loading">('+a.errorResponse.message+")</div>");else{e(t).empty();var i=function(e,a,t){if(0===arguments.length)return[];if(1===arguments.length){if(null==e)return[];if(Array.isArray(e))return e}return Array.prototype.slice.call(arguments)}(a);e(i).length>0?(i.sort(function(e,a){return e.total_num<a.total_num?1:e.total_num>a.total_num?-1:0}),e.each(i,function(e,a){var i,o,s,r,l,d=document.getElementById(n.results_template_id),c=d.innerHTML;if(o=this.id,s=this.name,r=this.total,1==n.fr_ids.length&&(l=n.nonsecureConvioPath+"TR"+(n.folderPath?n.folderPath:"")+"?team_id="+this.id+"&pg=team&fr_id="+n.fr_ids[0]),i=c.replace(/%%id%%/g,o).replace(/%%name%%/g,s).replace(/%%total%%/g,"$"+r).replace(/%%link%%/g,l),t.append(i),e==n.maxCount)return!1})):t.html('<div class="search_loading">(end of list)</div>'),n.callBack&&n.callBack()}}(n,a,t)}).fail(function(){window.console&&console.error("Top Teams: unsuccessful")})}var t={},n={fr_ids:[],maxCount:10,folderPath:null,loadingImage:null,loadingImageAlt:null,loadingText:null,callback:function(){}},i={init:function(i){(function(a,t){e(".search_item").remove(),t.loadingImage&&t.loadingText?a.append('<div class="list_loading"><img alt="'+t.loadingImageAlt+'" src="'+t.loadingImage+'" />'+t.loadingText+"</div>"):t.loadingImage?a.append('<div class="list_loading"><img alt="'+t.loadingImageAlt+'" src="'+t.loadingImage+'" /></div>'):t.loadingText&&a.append('<div class="list_loading">'+t.loadingText+"</div>")})(this,t=e.extend({},n,i)),this.data("settings",t),a(this,t)}};e.fn.madTopTeams=function(a){return i[a]?i[a].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof a&&a?void e.error("Method "+a+" does not exist on jQuery.madTopTeams"):i.init.apply(this,arguments)}}(jQuery);
