
/**********************************************************************\
*
*	jQuery.madTopTeams
*	----------------------
*	version: 2.0.3
*	date: 2020/08/19
*	license: GPL-3.0-or-later
*	copyright (C) 2020 Brian Patrick Mucha
*
\**********************************************************************/

!function(e){"use strict";function a(a,t){var n=[],s=[];e.each(t.fr_ids,function(a,i){var o="method=getTopTeamsData&v=1.0&api_key="+t.apiKey+"&response_format=json&suppress_response_codes=true&fr_id="+i,l=t.proxyURL+escape(t.secureConvioPath+"CRTeamraiserAPI?"+o),r=e.getJSON(l,function(e){s.push(e)});n.push(r)}),e.when.apply(e,n).then(function(){var n=[];e.each(s,function(e,a){if(a.getTopTeamsDataResponse){var t;for(t=0;t<a.getTopTeamsDataResponse.teamraiserData.length;t++)a.getTopTeamsDataResponse.teamraiserData[t].total_num=Number(a.getTopTeamsDataResponse.teamraiserData[t].total.replace(/[^0-9.-]+/g,""));n=[].concat(n,a.getTopTeamsDataResponse.teamraiserData)}}),function(a,t,n){if(a.errorResponse)t.html('<div class="list_message">('+a.errorResponse.message+")</div>");else{e(t).empty();var s=function(e,a,t){if(0===arguments.length)return[];if(1===arguments.length){if(null==e)return[];if(Array.isArray(e))return e}return Array.prototype.slice.call(arguments)}(a);e(s).length>0?(s.sort((e,a)=>a.total_num-e.total_num),e.each(s,function(e,a){var s,i,o,l,r=document.getElementById(n.results_template_id),p=r.innerHTML;if(i=this.id,o=this.name,l=this.total,s=p.replace(/%%id%%/g,i).replace(/%%name%%/g,o).replace(/%%total%%/g,l),t.append(s),e+1==n.maxCount)return!1})):t.html('<div class="list_message">(end of list)</div>'),n.callBack&&n.callBack()}}(n,a,t)}).fail(function(){window.console&&console.error("Top Teams: unsuccessful")})}var t={},n={fr_ids:[],maxCount:10,loadingImage:null,loadingImageAlt:null,loadingText:null,callback:function(){}},s={init:function(s){(function(a,t){e(a).empty(),t.loadingImage&&t.loadingText?a.append('<div class="list_loading"><img alt="'+t.loadingImageAlt+'" src="'+t.loadingImage+'" />'+t.loadingText+"</div>"):t.loadingImage?a.append('<div class="list_loading"><img alt="'+t.loadingImageAlt+'" src="'+t.loadingImage+'" /></div>'):t.loadingText&&a.append('<div class="list_loading">'+t.loadingText+"</div>")})(this,t=e.extend({},n,s)),this.data("settings",t),a(this,t)}};e.fn.madTopTeams=function(a){return s[a]?s[a].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof a&&a?void e.error("Method "+a+" does not exist on jQuery.madTopTeams"):s.init.apply(this,arguments)}}(jQuery);
